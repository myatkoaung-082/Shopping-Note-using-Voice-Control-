<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Note with Voice Control</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      background-color: #f9f9f9;
    }
    .container {
      max-width: 600px;
    }
    .mic-active {
      background-color: #ffcccc !important;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h2 class="text-center mb-4">ðŸ›’ Shopping Note (Voice Controlled)</h2>

    <div class="form-group">
      <label for="language">Language:</label>
      <select id="language" class="form-control w-50">
        <option value="en-US">English</option>
        <option value="my-MM">á€™á€¼á€”á€ºá€™á€¬</option>
      </select>
    </div>

    <div class="input-group mb-3">
      <input id="itemInput" type="text" class="form-control" placeholder="Enter item or speak...">
      <div class="input-group-append">
        <button id="micButton" class="btn btn-primary">ðŸŽ¤ Mic</button>
      </div>
    </div>

    <ul id="shoppingList" class="list-group mb-3"></ul>

    <button id="clearList" class="btn btn-danger">Clear All</button>
  </div>

  <script>
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'en-US';
    recognition.interimResults = false;

    const itemInput = document.getElementById('itemInput');
    const micButton = document.getElementById('micButton');
    const shoppingList = document.getElementById('shoppingList');
    const clearList = document.getElementById('clearList');

    document.getElementById('language').addEventListener('change', function () {
      recognition.lang = this.value;
    });

    micButton.addEventListener('click', () => {
      recognition.start();
      micButton.classList.add('mic-active');
    });

    recognition.onend = () => {
      micButton.classList.remove('mic-active');
    }

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript.trim();
      handleVoiceCommand(transcript);
    };

    function handleVoiceCommand(transcript) {
      const lower = transcript.toLowerCase();

      if (lower.includes('clear') || lower.includes('á€–á€»á€€á€º')) {
        clearShoppingList();
      } else if (lower.includes('delete') || lower.includes('á€–á€»á€€á€ºá€•á€«')) {
        const keyword = lower.replace('delete', '').replace('á€–á€»á€€á€ºá€•á€«', '').trim();
        deleteItemByKeyword(keyword);
      } else {
        addItem(transcript);
      }
    }

    function addItem(text) {
      if (!text) return;
      const li = document.createElement('li');
      li.textContent = text;
      li.className = 'list-group-item d-flex justify-content-between align-items-center';
      const delBtn = document.createElement('button');
      delBtn.textContent = 'âŒ';
      delBtn.className = 'btn btn-sm btn-danger';
      delBtn.onclick = () => li.remove();
      li.appendChild(delBtn);
      shoppingList.appendChild(li);
      itemInput.value = '';
    }

    function deleteItemByKeyword(keyword) {
      const items = shoppingList.querySelectorAll('li');
      items.forEach(li => {
        if (li.textContent.toLowerCase().includes(keyword)) {
          li.remove();
        }
      });
    }

    itemInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        addItem(itemInput.value.trim());
      }
    });

    clearList.addEventListener('click', clearShoppingList);

    function clearShoppingList() {
      shoppingList.innerHTML = '';
    }
  </script>
</body>
</html>
